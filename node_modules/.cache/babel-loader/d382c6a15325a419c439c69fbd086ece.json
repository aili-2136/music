{"remainingRequest":"D:\\Less\\小罗音乐2.0\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Less\\小罗音乐2.0\\node_modules\\babel-loader\\lib\\index.js!D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Less\\小罗音乐2.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Less\\小罗音乐2.0\\src\\pages\\frame\\footer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Less\\小罗音乐2.0\\src\\pages\\frame\\footer.vue","mtime":1680331661711},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662623268261},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662623267592},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\babel-loader\\lib\\index.js","mtime":1662623271902},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662623268261},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\vue-loader\\lib\\index.js","mtime":1662623271232}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _typeof from \"D:\\\\Less\\\\\\u5C0F\\u7F57\\u97F3\\u4E502.0\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport slider from \"../../components/slider/slider.vue\";\nimport { readData, saveData, getlyric, getmiao } from \"../../general/regular.js\";\nimport { getSongDetail, getSongUrl, getLyric } from \"../../plugins/music.js\";\nimport drawer from \"../../pages/details/lyric/drawer.vue\";\n\nfunction _realFormatSecond(second) {\n  var secondType = _typeof(second);\n\n  if (secondType === 'number' || secondType === 'string') {\n    second = parseInt(second);\n    var hours = Math.floor(second / 3600);\n    second = second - hours * 3600;\n    var mimute = Math.floor(second / 60);\n    second = second - mimute * 60;\n    return ('0' + mimute).slice(-2) + ':' + ('0' + second).slice(-2);\n  } else {\n    return '00:00';\n  }\n}\n\nexport default {\n  name: 'footer-box',\n  components: {\n    'slider': slider,\n    'drawer': drawer\n  },\n  data: function data() {\n    return {\n      musicid: '',\n      //音乐id\n      ofno: false,\n      //播放按钮的状态\n      canplay: false,\n      //是否可以播放\n      playing: false,\n      //歌曲是否播放\n      cycle: 1,\n      //循环播放状态\n      hint: false,\n      SongDetail: {\n        url: '',\n        img: '',\n        name: '',\n        nickname: [],\n        time: '',\n        lyric: ''\n      },\n      block: {\n        display: 'block'\n      },\n      drawer: false,\n      audio: {\n        // 播放状态\n        playing: false,\n        // 静音状态\n        muted: false,\n        // 音频当前播放时长\n        currentTime: 0,\n        // 音量\n        volume: 0.3,\n        // 音频最大播放时长\n        maxTime: 0\n      },\n      cacheCurrent: 0,\n      cacheVoice: 1\n    };\n  },\n  methods: {\n    iscycle: function iscycle(id) {\n      this.cycle = id;\n    },\n    ztbf: function ztbf() {\n      this.ofno = !this.ofno;\n    },\n    display: function display() {\n      this.block.display = 'block';\n    },\n    none: function none() {\n      this.block.display = 'none';\n    },\n    goup: function goup() {\n      this.drawer = !this.drawer;\n    },\n    onclick: function onclick(value) {\n      this.drawer = value;\n    },\n\n    /*audio*/\n    //播放完后触发事件\n    ended: function ended() {},\n    //可以播放了\n    oncanplay: function oncanplay() {\n      if (this.audio.playing) {\n        this.$refs.audio.play();\n      }\n    },\n    //timeupdate事件大概每秒一次，用来更新音频流的当前播放时间\n    ontimeupdate: function ontimeupdate() {\n      this.audio.currentTime = this.$refs.audio.currentTime;\n    },\n    onloadedmetadata: function onloadedmetadata() {\n      this.audio.maxTime = parseInt(this.$refs.audio.duration);\n    },\n\n    /*progress*/\n    //拖动进度条\n    progressChange: function progressChange(value) {\n      this.$refs.audio.currentTime = value >= 0 ? value : this.cacheCurrent;\n      this.audio.currentTime = value >= 0 ? value : this.cacheCurrent;\n    },\n    mouseupChangeTime: function mouseupChangeTime() {\n      this.progressChange(this.cacheCurrent);\n    },\n    realFormatSecond: function realFormatSecond(second) {\n      this.cacheCurrent = second;\n      return _realFormatSecond(second);\n    },\n\n    /*volume*/\n    volumeChange: function volumeChange() {\n      this.cancelMute(false);\n\n      if (this.audio.volume === 0) {\n        this.mute(false);\n      }\n\n      this.$refs.audio.volume = this.audio.volume;\n    },\n    mute: function mute(event) {\n      // 正常点击静音和取消静音的时候把当前音量存下来，拖动触发的静音方法只需要改变状态\n      event && (this.cacheVoice = this.audio.volume);\n      this.audio.volume = 0;\n      this.audio.muted = true;\n      this.$refs.audio.muted = true;\n    },\n    // 取消静音\n    cancelMute: function cancelMute(event) {\n      event && (this.audio.volume = this.cacheVoice);\n      this.audio.muted = false;\n      this.$refs.audio.muted = false;\n    }\n  },\n  filters: {\n    // 将整数转化成时分秒\n    formatSecond: function formatSecond() {\n      var second = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return _realFormatSecond(second);\n    }\n  },\n  computed: {\n    ismusicid: function ismusicid() {\n      return this.$store.state.musicid;\n    },\n    isofno: function isofno() {\n      return this.ofno;\n    }\n  },\n  watch: {\n    ismusicid: {\n      handler: function handler(value) {\n        var _this = this;\n\n        this.musicid = value;\n        getSongUrl({\n          id: value,\n          level: 'higher'\n        }).then(function (res) {\n          _this.SongDetail.url = res.data.data[0].url;\n          _this.SongDetail.time = res.data.data[0].time;\n          _this.sliderParams.time = res.data.data[0].time;\n        });\n        getSongDetail({\n          ids: value\n        }).then(function (res) {\n          _this.SongDetail.img = res.data.songs[0].al.picUrl;\n          _this.SongDetail.name = res.data.songs[0].name;\n          _this.SongDetail.nickname = res.data.songs[0].ar;\n        });\n        getLyric({\n          id: value\n        }).then(function (res) {\n          _this.SongDetail.lyric = getlyric(res.data.lrc.lyric);\n        });\n        this.ofno = true;\n      }\n    },\n    isofno: {\n      handler: function handler(value) {\n        if (value) {\n          this.$refs.audio.play();\n          this.audio.playing = true;\n        } else {\n          this.$refs.audio.pause();\n          this.audio.playing = false;\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    var id = null;\n\n    if (localStorage.getItem(\"RecentlyPlayed\")) {\n      id = JSON.parse(localStorage.getItem(\"RecentlyPlayed\"))[0];\n    } else {\n      id = this.$store.state.musicid;\n    }\n\n    this.musicid = id;\n    getSongUrl({\n      id: id,\n      level: 'higher'\n    }).then(function (res) {\n      _this2.SongDetail.url = res.data.data[0].url;\n      _this2.SongDetail.time = res.data.data[0].time;\n    });\n    getSongDetail({\n      ids: id\n    }).then(function (res) {\n      _this2.SongDetail.img = res.data.songs[0].al.picUrl;\n      _this2.SongDetail.name = res.data.songs[0].name;\n      _this2.SongDetail.nickname = res.data.songs[0].ar;\n    });\n    getLyric({\n      id: id\n    }).then(function (res) {\n      _this2.SongDetail.lyric = getlyric(res.data.lrc.lyric);\n    });\n  }\n};",{"version":3,"sources":["footer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"footer-box\">\r\n\t\t<div class=\"song\">\r\n\t\t\t<div id=\"img\" @mouseover=\"display\">\r\n\t\t\t\t<img :src=\"SongDetail.img\" alt=\"\">\r\n\t\t\t</div>\r\n\t\t\t<div id=\"yy\" :style=\"block\" @mouseout=\"none\" @click=\"goup\">\r\n\t\t\t\t<i class=\"iconfont icon-xiangshangjiantou\" style=\"pointer-events: none;\" v-show=\"!drawer\"></i>\r\n\t\t\t\t<i class=\"iconfont icon-xiangxiajiantou\" style=\"pointer-events: none;\" v-show=\"drawer\"></i>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div id=\"name\">\r\n\t\t\t\t<div id=\"songname\">\r\n\t\t\t\t\t<div id=\"text\">\r\n\t\t\t\t\t\t{{SongDetail.name}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<i class=\"iconfont icon-xihuan\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"nickname\">\r\n\t\t\t\t\t<span v-for=\"(item,index) in SongDetail.nickname\">\r\n\t\t\t\t\t\t{{index==0?item.name:'/'+item.name}}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"Drawer\">\r\n\t\t\t\t<drawer :sync='drawer' :play='ofno' @onclick=\"onclick\" :musicid='musicid' :params='SongDetail' :playtime='audio.currentTime'>\r\n\t\t\t\t</drawer>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"player\">\r\n\t\t\t<div id=\"console\">\r\n\t\t\t\t<audio ref=\"audio\" @ended=\"ended\" :src=\"SongDetail.url\" @timeupdate=\"ontimeupdate\"\r\n\t\t\t\t\t@loadedmetadata=\"onloadedmetadata\" @canplay='oncanplay'>\r\n\r\n\t\t\t\t</audio>\r\n\t\t\t\t<i v-show=\"cycle==1\" @click=\"iscycle(2)\" class=\"iconfont icon-24gl-repeat2\"></i>\r\n\t\t\t\t<i v-show=\"cycle==2\" @click=\"iscycle(3)\" class=\"iconfont icon-danquxunhuan\"></i>\r\n\t\t\t\t<i v-show=\"cycle==3\" @click=\"iscycle(1)\" class=\"iconfont icon-24gl-repeatInfinite2\"></i>\r\n\t\t\t\t<i class=\"iconfont icon-shangyishou\"></i>\r\n\t\t\t\t<p id=\"p\" @click=\"ztbf\">\r\n\t\t\t\t\t<span v-show=\"ofno==true\" class=\"iconfont icon-zanting3\" style=\"font-size: 12px;\"></span>\r\n\t\t\t\t\t<span v-show=\"ofno==false\" class=\"iconfont icon-24gf-play\" style=\"font-size: 12px;\"></span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<i class=\"iconfont icon-xiayishou\"></i>\r\n\t\t\t\t<i>词</i>\r\n\t\t\t</div>\r\n\t\t\t<div id=\"bar\">\r\n\t\t\t\t<span>{{audio.currentTime|formatSecond}}</span>\r\n\t\t\t\t<div class=\"slider\">\r\n\t\t\t\t\t<el-slider \r\n\t\t\t\t\t\t@change=\"progressChange\" \r\n\t\t\t\t\t\tv-model=\"audio.currentTime\" \r\n\t\t\t\t\t\t:max=\"audio.maxTime\"\r\n\t\t\t\t\t\t:format-tooltip=\"realFormatSecond\"\r\n\t\t\t\t\t\t@mouseup.native=\"mouseupChangeTime\"\r\n\t\t\t\t\t\t:show-tooltip=\"false\"></el-slider>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>{{audio.maxTime|formatSecond}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"key\">\r\n\t\t\t<i class=\"iconfont icon-bofangliebiao\" style=\"font-size: 22px; font-weight: 500;\"></i>\r\n\t\t\t<i id=\"volume\" class=\"iconfont icon-weibiaoti-2\" v-if=\"!audio.muted\"\r\n\t\t\t\tstyle=\"font-size: 22px; font-weight: 600;\" @click=\"mute\"></i>\r\n\t\t\t<i id=\"volume\" class=\"iconfont icon-weibiaoti-\"\tv-if=\"audio.muted\"\r\n\t\t\t\tstyle=\"font-size: 22px; font-weight: 600;\" @click=\"cancelMute\"></i>\r\n\t\t\t<div id=\"control\">\r\n\t\t\t\t<el-slider \r\n\t\t\t\tv-model=\"audio.volume\" \r\n\t\t\t\tvertical \r\n\t\t\t\theight=\"70px\" \r\n\t\t\t\t:show-tooltip='hint' \r\n\t\t\t\t@input=\"volumeChange()\"\r\n\t\t\t\t:step='0.01'\r\n\t\t\t\t:max=\"1\">\r\n\t\t\t\t</el-slider>\r\n\t\t\t\t<span></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport slider from '../../components/slider/slider.vue'\r\n\timport {\r\n\t\treadData,\r\n\t\tsaveData,\r\n\t\tgetlyric,\r\n\t\tgetmiao\r\n\t} from '../../general/regular.js'\r\n\timport {\r\n\t\tgetSongDetail,\r\n\t\tgetSongUrl,\r\n\t\tgetLyric\r\n\t} from '../../plugins/music.js'\r\n\timport drawer from '../../pages/details/lyric/drawer.vue'\r\n\r\n\tfunction realFormatSecond(second) {\r\n\t\tvar secondType = typeof second;\r\n\r\n\t\tif (secondType === 'number' || secondType === 'string') {\r\n\t\t\tsecond = parseInt(second);\r\n\r\n\t\t\tvar hours = Math.floor(second / 3600);\r\n\t\t\tsecond = second - hours * 3600;\r\n\t\t\tvar mimute = Math.floor(second / 60);\r\n\t\t\tsecond = second - mimute * 60;\r\n\r\n\t\t\treturn ('0' + mimute).slice(-2) + ':' + ('0' + second).slice(-2)\r\n\t\t} else {\r\n\t\t\treturn '00:00'\r\n\t\t}\r\n\t}\r\n\r\n\texport default {\r\n\t\tname: 'footer-box',\r\n\t\tcomponents: {\r\n\t\t\t'slider': slider,\r\n\t\t\t'drawer': drawer\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmusicid: '', //音乐id\r\n\t\t\t\tofno: false, //播放按钮的状态\r\n\t\t\t\tcanplay: false, //是否可以播放\r\n\t\t\t\tplaying: false, //歌曲是否播放\r\n\t\t\t\tcycle: 1, //循环播放状态\r\n\t\t\t\thint: false,\r\n\t\t\t\tSongDetail: {\r\n\t\t\t\t\turl: '',\r\n\t\t\t\t\timg: '',\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tnickname: [],\r\n\t\t\t\t\ttime: '',\r\n\t\t\t\t\tlyric: ''\r\n\t\t\t\t},\r\n\t\t\t\tblock: {\r\n\t\t\t\t\tdisplay: 'block'\r\n\t\t\t\t},\r\n\t\t\t\tdrawer: false,\r\n\t\t\t\taudio: {\r\n\t\t\t\t\t// 播放状态\r\n\t\t\t\t\tplaying: false,\r\n\t\t\t\t\t// 静音状态\r\n\t\t\t\t\tmuted: false,\r\n\t\t\t\t\t// 音频当前播放时长\r\n\t\t\t\t\tcurrentTime: 0,\r\n\t\t\t\t\t// 音量\r\n\t\t\t\t\tvolume: 0.3,\r\n\t\t\t\t\t// 音频最大播放时长\r\n\t\t\t\t\tmaxTime: 0\r\n\t\t\t\t},\r\n\t\t\t\tcacheCurrent:0,\r\n\t\t\t\tcacheVoice:1\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tiscycle(id) {\r\n\t\t\t\tthis.cycle = id\r\n\t\t\t},\r\n\t\t\tztbf() {\r\n\t\t\t\tthis.ofno = !this.ofno\r\n\t\t\t},\r\n\t\t\tdisplay() {\r\n\t\t\t\tthis.block.display = 'block'\r\n\t\t\t},\r\n\t\t\tnone() {\r\n\t\t\t\tthis.block.display = 'none'\r\n\t\t\t},\r\n\t\t\tgoup() {\r\n\t\t\t\tthis.drawer = !this.drawer\r\n\t\t\t},\r\n\t\t\tonclick(value) {\r\n\t\t\t\tthis.drawer = value\r\n\t\t\t},\r\n\t\t\t/*audio*/\r\n\t\t\t//播放完后触发事件\r\n\t\t\tended() {\r\n\r\n\t\t\t},\r\n\t\t\t//可以播放了\r\n\t\t\toncanplay() {\r\n\t\t\t\tif (this.audio.playing) {\r\n\t\t\t\t\tthis.$refs.audio.play()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//timeupdate事件大概每秒一次，用来更新音频流的当前播放时间\r\n\t\t\tontimeupdate() {\r\n\t\t\t\tthis.audio.currentTime = this.$refs.audio.currentTime\r\n\t\t\t},\r\n\t\t\tonloadedmetadata() {\r\n\t\t\t\tthis.audio.maxTime = parseInt(this.$refs.audio.duration)\r\n\t\t\t},\r\n\r\n\t\t\t/*progress*/\r\n\t\t\t//拖动进度条\r\n\t\t\tprogressChange(value){\r\n\t\t\t\tthis.$refs.audio.currentTime = value >= 0 ? value : this.cacheCurrent;\r\n\t\t\t\tthis.audio.currentTime = value >= 0 ? value : this.cacheCurrent\t\r\n\t\t\t},\r\n\t\t\tmouseupChangeTime(){\r\n\t\t\t\tthis.progressChange(this.cacheCurrent)\r\n\t\t\t},\r\n\t\t\trealFormatSecond(second) {\r\n\t\t\t        this.cacheCurrent = second;\r\n\t\t\t        return realFormatSecond(second);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/*volume*/\r\n\t\t\tvolumeChange(){\r\n\t\t\t\tthis.cancelMute(false);\r\n\t\t\t\t  if (this.audio.volume === 0) {\r\n\t\t\t\t    this.mute(false)\r\n\t\t\t\t  }\r\n\t\t\t\t  this.$refs.audio.volume = this.audio.volume;\r\n\t\t\t},\r\n\t\t\tmute(event) {\r\n\t\t\t  // 正常点击静音和取消静音的时候把当前音量存下来，拖动触发的静音方法只需要改变状态\r\n\t\t\t  event && (this.cacheVoice = this.audio.volume);\r\n\t\t\t  this.audio.volume = 0;\r\n\t\t\t  this.audio.muted = true;\r\n\t\t\t  this.$refs.audio.muted = true;\r\n\t\t\t},\r\n\t\t\t// 取消静音\r\n\t\t\tcancelMute(event) {\r\n\t\t\t  event && (this.audio.volume = this.cacheVoice);\r\n\t\t\t  this.audio.muted = false;\r\n\t\t\t  this.$refs.audio.muted = false;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t      // 将整数转化成时分秒\r\n\t\t      formatSecond(second = 0) {\r\n\t\t        return realFormatSecond(second)\r\n\t\t      }\r\n\t\t },\r\n\t\tcomputed: {\r\n\t\t\tismusicid() {\r\n\t\t\t\treturn this.$store.state.musicid\r\n\t\t\t},\r\n\t\t\tisofno() {\r\n\t\t\t\treturn this.ofno\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tismusicid: {\r\n\t\t\t\thandler(value) {\r\n\t\t\t\t\tthis.musicid = value\r\n\t\t\t\t\tgetSongUrl({\r\n\t\t\t\t\t\tid: value,\r\n\t\t\t\t\t\tlevel: 'higher'\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.SongDetail.url = res.data.data[0].url\r\n\t\t\t\t\t\tthis.SongDetail.time = res.data.data[0].time\r\n\t\t\t\t\t\tthis.sliderParams.time = res.data.data[0].time\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tgetSongDetail({\r\n\t\t\t\t\t\tids: value\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.SongDetail.img = res.data.songs[0].al.picUrl\r\n\t\t\t\t\t\tthis.SongDetail.name = res.data.songs[0].name\r\n\t\t\t\t\t\tthis.SongDetail.nickname = res.data.songs[0].ar\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tgetLyric({\r\n\t\t\t\t\t\tid: value\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.SongDetail.lyric = getlyric(res.data.lrc.lyric)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.ofno = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisofno: {\r\n\t\t\t\thandler(value) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.$refs.audio.play()\r\n\t\t\t\t\t\tthis.audio.playing = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$refs.audio.pause()\r\n\t\t\t\t\t\tthis.audio.playing = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tlet id=null\r\n\t\t\tif(localStorage.getItem(\"RecentlyPlayed\")){\r\n\t\t\t\tid=JSON.parse(localStorage.getItem(\"RecentlyPlayed\"))[0]\r\n\t\t\t}else{\r\n\t\t\t\tid=this.$store.state.musicid\r\n\t\t\t}\r\n\t\t\tthis.musicid = id\r\n\t\t\tgetSongUrl({\r\n\t\t\t\tid: id,\r\n\t\t\t\tlevel: 'higher'\r\n\t\t\t}).then(res => {\r\n\t\t\t\tthis.SongDetail.url = res.data.data[0].url\r\n\t\t\t\tthis.SongDetail.time = res.data.data[0].time\r\n\t\t\t})\r\n\r\n\t\t\tgetSongDetail({\r\n\t\t\t\tids: id\r\n\t\t\t}).then(res => {\r\n\t\t\t\tthis.SongDetail.img = res.data.songs[0].al.picUrl\r\n\t\t\t\tthis.SongDetail.name = res.data.songs[0].name\r\n\t\t\t\tthis.SongDetail.nickname = res.data.songs[0].ar\r\n\t\t\t})\r\n\r\n\t\t\tgetLyric({\r\n\t\t\t\tid: id\r\n\t\t\t}).then(res => {\r\n\t\t\t\tthis.SongDetail.lyric = getlyric(res.data.lrc.lyric)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.footer-box {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-top: 1px #e1e1e1 solid;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\timg {\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.song {\r\n\t\twidth: 210px;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.song #img {\r\n\t\twidth: 43px;\r\n\t\theight: 43px;\r\n\t\tmargin-left: 10px;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\t.song #yy {\r\n\t\twidth: 43px;\r\n\t\theight: 43px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 42px;\r\n\t\tborder-radius: 3px;\r\n\t\tmargin-left: -43px;\r\n\t\tcolor: #fff;\r\n\t\tbackground: rgba(0, 0, 0, 0.5);\r\n\t}\r\n\r\n\timg {\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\t.song #name {\r\n\t\tflex: 1;\r\n\t\tmargin-left: 10px;\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 16px;\r\n\t\tfont-variant-caps: all-small-caps;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.song #name #songname {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.song #name #songname>i {\r\n\t\tdisplay: inline-block;\r\n\t\tfont-size: 24px;\r\n\t\theight: 24px;\r\n\t\tmargin-top: -8px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.song #name #songname #text {\r\n\t\tmax-width: 120px;\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.song #name #nickname {\r\n\t\tflex: 1;\r\n\t\tmax-width: 120px;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.player {\r\n\t\twidth: 420px;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\r\n\t.player #console {\r\n\t\twidth: 195px;\r\n\t\theight: 32px;\r\n\t\tmargin: 0 auto;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.player #console i {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #313131;\r\n\t}\r\n\r\n\t.player #button i:hover {\r\n\t\tcolor: #FF7A9E;\r\n\t}\r\n\r\n\t.player #console #p {\r\n\t\twidth: 32px;\r\n\t\theight: 32px;\r\n\t\tborder-radius: 50%;\r\n\t\tline-height: 32px;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #F5F5F5;\r\n\t}\r\n\r\n\t.player #bar {\r\n\t\twidth: 100%;\r\n\t\theight: 20px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.player #bar>span {\r\n\t\tdisplay: inline-block;\r\n\t\theight: 20px;\r\n\t\tfont-size: 16px;\r\n\t\tline-height: 17px;\r\n\t\tcolor: #737373;\r\n\t\tfont-variant-caps: all-small-caps;\r\n\t}\r\n\r\n\t.slider {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\theight: 20px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t/deep/ .el-slider {\r\n\t\tcursor: default;\r\n\t\twidth: 97%;\r\n\t\theight: 20px;\r\n\t}\r\n\t\r\n\t\r\n\t/deep/.el-slider__runway {\r\n\t\twidth: 100%;\r\n\t\theight: 6px;\r\n\t\tcursor: default;\r\n\t\tmargin-top: 8px;\r\n\t}\r\n\r\n\t/deep/ .el-slider__bar {\r\n\t\tbackground-color: #FF7A9E;\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t/deep/.el-slider__button-wrapper {\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t/deep/.el-slider__button {\r\n\t\tmargin-top: -1px;\r\n\t\twidth: 8px;\r\n\t\theight: 8px;\r\n\t\tborder: none;\r\n\t\tbackground-color: #FF7A9E;\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\r\n\t.key {\r\n\t\twidth: 210px;\r\n\t\theight: 100%;\r\n\t\tline-height: 70px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.key>i {\r\n\t\tfloat: right;\r\n\t\tmargin-right: 25px;\r\n\t}\r\n\r\n\t.key #control {\r\n\t\tposition: relative;\r\n\t\ttop: -80px;\r\n\t\tleft: 110px;\r\n\t\tz-index: 3;\r\n\t\twidth: 30px;\r\n\t\theight: 90px;\r\n\t\tbox-shadow: 0px 2px 7px 0px #cecece;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 3px;\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.key #control>span {\r\n\t\tposition: absolute;\r\n\t\ttop: 70px;\r\n\t\tleft: 10px;\r\n\t\tdisplay: block;\r\n\t\twidth: 10px;\r\n\t\theight: 7px;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\r\n\t#control>span::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground: #fff;\r\n\t\ttransform-origin: right top;\r\n\t\ttransform: rotate(45deg);\r\n\t}\r\n\r\n\t.key #control:active {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.key #control:hover {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t#volume:hover+#control {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/deep/ #control .el-slider__button {\r\n\t\twidth: 8px !important;\r\n\t\theight: 8px !important;\r\n\t\tmargin-top: -14px;\r\n\t\tbackground-color: #FF7A9E;\r\n\t\tborder: none;\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t/deep/ #control .el-slider__button-wrapper {\r\n\t\tz-index: 9;\r\n\t\tmargin-left: 12px;\r\n\t\tcursor: default;\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t}\r\n\r\n\t/deep/ #control .el-slider__runway {\r\n\t\twidth: 4px !important;\r\n\t\tmargin-left: 12px;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t/deep/ #control .el-slider__bar {\r\n\t\twidth: 4px !important;\r\n\t\tbackground-color: #FF7A9E;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/pages/frame"}]}