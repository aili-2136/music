{"remainingRequest":"D:\\Less\\小罗音乐2.0\\node_modules\\babel-loader\\lib\\index.js!D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Less\\小罗音乐2.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Less\\小罗音乐2.0\\src\\pages\\login\\denglu\\QRcode.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Less\\小罗音乐2.0\\src\\pages\\login\\denglu\\QRcode.vue","mtime":1680335291468},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662623268261},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\babel-loader\\lib\\index.js","mtime":1662623271902},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662623268261},{"path":"D:\\Less\\小罗音乐2.0\\node_modules\\vue-loader\\lib\\index.js","mtime":1662623271232}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getLoginQrKey, getLoginQrCreate, getLoginQrCheck } from \"../../../plugins/register.js\";\nimport baseimg from \"../../../general/regular.js\";\nimport { saveData } from \"../../../general/regular.js\";\nexport default {\n  name: 'QRcode',\n  props: {},\n  data: function data() {\n    return {\n      imgpar: null,\n      //二维码图片\n      imgkey: null,\n      take_time: null,\n      //轮询定时器\n      backlog: false,\n      //待确认\n      timestamp: new Date().getTime(),\n      shadeSty: {\n        display: 'none'\n      }\n    };\n  },\n  methods: {\n    retLogin: function retLogin() {\n      this.$emit('onerweima');\n      clearInterval(this.take_time);\n    },\n    take: function take() {\n      var _this = this;\n\n      getLoginQrKey({\n        timestamp: this.timestamp\n      }).then(function (res) {\n        _this.imgkey = res.data.data.unikey;\n        getLoginQrCreate({\n          key: res.data.data.unikey,\n          qrimg: true\n        }).then(function (res) {\n          _this.imgpar = res.data.data.qrimg;\n          _this.take_time = setInterval(function (i) {\n            getLoginQrCheck({\n              key: _this.imgkey,\n              timestamp: new Date().getTime()\n            }).then(function (res) {\n              if (res.data.code == 800) {\n                //过期\n                _this.shadeSty = {\n                  dispaly: 'none'\n                };\n\n                _this.take();\n              }\n\n              if (res.data.code == 801) {}\n\n              if (res.data.code == 802) {\n                //待确认\n                _this.shadeSty = {\n                  dispaly: 'block'\n                };\n              }\n\n              if (res.data.code == 803) {\n                //登录成功\n                _this.$store.dispatch('login', false);\n\n                saveData('cookie', res.data.cookie);\n                clearInterval(_this.take_time);\n              }\n            });\n          }, 2000);\n        });\n      });\n    }\n  },\n  created: function created() {\n    this.take();\n  }\n};",{"version":3,"sources":["QRcode.vue"],"names":[],"mappings":";;;;;;;;;;;;AAaA,SACA,aADA,EAEA,gBAFA,EAGA,eAHA;AAKA,OAAA,OAAA;AACA,SAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,KAAA,EAAA,EAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AACA;AACA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA,IAHA;AAGA;AACA,MAAA,OAAA,EAAA,KAJA;AAIA;AACA,MAAA,SAAA,EAAA,IAAA,IAAA,GAAA,OAAA,EALA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA;AADA;AANA,KAAA;AAUA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,KAAA,CAAA,WAAA;AACA,MAAA,aAAA,CAAA,KAAA,SAAA,CAAA;AACA,KAJA;AAKA,IAAA,IALA,kBAKA;AAAA;;AACA,MAAA,aAAA,CAAA;AACA,QAAA,SAAA,EAAA,KAAA;AADA,OAAA,CAAA,CAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA;AACA,QAAA,gBAAA,CAAA;AACA,UAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAAA,CAAA,CAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,KAAA,CAAA,SAAA,GAAA,WAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,eAAA,CAAA;AACA,cAAA,GAAA,EAAA,KAAA,CAAA,MADA;AAEA,cAAA,SAAA,EAAA,IAAA,IAAA,GAAA,OAAA;AAFA,aAAA,CAAA,CAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA;AACA,kBAAA,OAAA,EAAA;AADA,iBAAA;;AAGA,gBAAA,KAAA,CAAA,IAAA;AACA;;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA,CAEA;;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA;AACA,kBAAA,OAAA,EAAA;AADA,iBAAA;AAGA;;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,OAAA,EAAA,KAAA;;AACA,gBAAA,QAAA,CAAA,QAAA,EAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,gBAAA,aAAA,CAAA,KAAA,CAAA,SAAA,CAAA;AACA;AACA,aA1BA;AA2BA,WA5BA,EA4BA,IA5BA,CAAA;AA6BA,SAlCA;AAmCA,OAvCA;AAwCA;AA9CA,GAfA;AA+DA,EAAA,OA/DA,qBA+DA;AACA,SAAA,IAAA;AACA;AAjEA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"QRcode\">\r\n\t\t<i class=\"iconfont icon-fanhui1\" @click=\"retLogin\">返回登录</i>\r\n\t\t<div id=\"img\">\r\n\t\t\t<img :src=\"imgpar\" alt=\"\">\r\n\t\t</div>\r\n\t\t<div id=\"shade\" :style=\"shadeSty\">\r\n\t\t\t请在手机上确认\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetLoginQrKey,\r\n\t\tgetLoginQrCreate,\r\n\t\tgetLoginQrCheck\r\n\t} from '../../../plugins/register.js'\r\n\timport baseimg from '../../../general/regular.js'\r\n\timport {saveData} from '../../../general/regular.js'\r\n\texport default {\r\n\t\tname: 'QRcode',\r\n\t\tprops: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgpar: null, //二维码图片\r\n\t\t\t\timgkey: null,\r\n\t\t\t\ttake_time: null, //轮询定时器\r\n\t\t\t\tbacklog:false,\t//待确认\r\n\t\t\t\ttimestamp:new Date().getTime(),\r\n\t\t\t\tshadeSty:{\r\n\t\t\t\t\tdisplay:'none'\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tretLogin() {\r\n\t\t\t\tthis.$emit('onerweima')\r\n\t\t\t\tclearInterval(this.take_time)\r\n\t\t\t},\r\n\t\t\ttake() {\r\n\t\t\t\tgetLoginQrKey({\r\n\t\t\t\t\ttimestamp:this.timestamp\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.imgkey = res.data.data.unikey\r\n\t\t\t\t\tgetLoginQrCreate({\r\n\t\t\t\t\t\tkey: res.data.data.unikey,\r\n\t\t\t\t\t\tqrimg: true\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.imgpar = res.data.data.qrimg\r\n\t\t\t\t\t\tthis.take_time = setInterval(i => {\r\n\t\t\t\t\t\t\tgetLoginQrCheck({\r\n\t\t\t\t\t\t\t\tkey: this.imgkey,\r\n\t\t\t\t\t\t\t\ttimestamp:new Date().getTime()\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tif(res.data.code==800){\r\n\t\t\t\t\t\t\t\t\t//过期\r\n\t\t\t\t\t\t\t\t\tthis.shadeSty={\r\n\t\t\t\t\t\t\t\t\t\tdispaly:'none'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.take()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(res.data.code==801){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(res.data.code==802){\r\n\t\t\t\t\t\t\t\t\t//待确认\r\n\t\t\t\t\t\t\t\t\tthis.shadeSty={\r\n\t\t\t\t\t\t\t\t\t\tdispaly:'block'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(res.data.code==803){\r\n\t\t\t\t\t\t\t\t\t//登录成功\r\n\t\t\t\t\t\t\t\t\tthis.$store.dispatch('login',false)\r\n\t\t\t\t\t\t\t\t\tsaveData('cookie',res.data.cookie)\r\n\t\t\t\t\t\t\t\t\tclearInterval(this.take_time)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.take()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.QRcode {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.QRcode #img {\r\n\t\twidth: 180px;\r\n\t\theight: 180px;\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t}\r\n\r\n\t.QRcode #shade{\r\n\t\twidth: 180px;\r\n\t\theight: 180px;\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\ttext-align: center;\r\n\t\tline-height: 180px;\r\n\t\tfont-size:18px;\r\n\t\tbackground-color: rgba(208, 208, 208, 0.9);\r\n\t}\r\n\r\n\t.QRcode>i {\r\n\t\tdisplay: inline-block;\r\n\t\tfont-size: 16px;\r\n\t\tfont-variant-caps: all-small-caps;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-left: 15px;\r\n\t\tcursor: pointer;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/pages/login/denglu"}]}